<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />

    <!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

    <title>BeatleTech | Coen Stevens | Goodbye P-values, Hello Bayesian Statistics!</title>

    <meta
      name="description"
      content="Freelance company BeatleTech by Coen Stevens"
    />

    
    <meta name="keywords" content="post, Frequentism, Bayesianism, inferences, data analysis, statistics, p-values, OThot" />
    

    <meta name="author" content="Coen Stevens" />

    <link href="../../../../style.css" rel="stylesheet" type="text/css" />

    <link
      rel="shortcut icon"
      href="../../../../favicon.ico"
      type="image/x-icon"
    />

    <meta
      property="og:title"
      content="Goodbye P-values, Hello Bayesian Statistics!"
    />

    <meta
      property="og:description"
      content="Note: This is a repost of my original blog post at   OThot, where I also work as Senior Data Scientist."
    />

    <meta
      property="og:url"
      content="https://beatletech.com/2015/05/17/goodbye-pvalues-hello-bayesian-statistics"
    />

    <!--[if lt IE 9]>
      <script
        src="https://html5shiv.googlecode.com/svn/trunk/html5.js"
        type="text/javascript"
      ></script>
    <![endif]-->

    <!--[if lte IE 7]>
      <link href="../../../../css/ie.css" rel="stylesheet" type="text/css" />
    <![endif]-->
  </head>

  <body>
    <div id="wrapper" class="container_12">
      <header id="header" class="grid_12">
        <h1><a href="/">BeatleTech</a></h1>
        <img
          src="https://s3-eu-west-1.amazonaws.com/eu-west-1.beatletech.com/images/headshot.png"
          alt="It's only Hubris if you lose."
          title="It's only Hubris if you lose."
          height="155"
          width="200"
          class="thumbnail alignright"
        />
        <div id="freelancer">Coen JC Stevens</div>
      </header>
      <!-- end header -->

      <div id="content">
        <nav>
          <ul id="menu" class="clearfix">
            <li><a href="/">About</a></li>
            <li><a href="../../../../Setup">Setup</a></li>
            <li class="current"><a href="../../../../blog">Blog</a></li>
            <li><a href="../../../../archive">Archive</a></li>
            <li>
              <div
                id="search-searchbar"
                style="margin-top: -4px; margin-bottom: -10px; width: 350px;"
              ></div>
            </li>
          </ul>
          <br class="clear" />
        </nav>

        <div id="main" class="grid_9 alpha">
          <div id="search-hits-wrapper">
            <h3>Search results</h3>
            <a
              href="https://www.algolia.com/?utm_source=instantsearch.js&amp;utm_medium=website&amp;utm_content=instantsearchjs.netlify.app&amp;utm_campaign=poweredby"
              target="_blank"
              class="ais-PoweredBy-link"
              style="float: right; margin-right: 0px;"
              aria-label="Search by Algolia"
              rel="noopener noreferrer"
              ><svg
                height="1.2em"
                class="ais-PoweredBy-logo"
                viewBox="0 0 168 24"
                style="width: auto;"
              >
                <path
                  fill="#5D6494"
                  d="M6.97 6.68V8.3a4.47 4.47 0 0 0-2.42-.67 2.2 2.2 0 0 0-1.38.4c-.34.26-.5.6-.5 1.02 0 .43.16.77.49 1.03.33.25.83.53 1.51.83a7.04 7.04 0 0 1 1.9 1.08c.34.24.58.54.73.89.15.34.23.74.23 1.18 0 .95-.33 1.7-1 2.24a4 4 0 0 1-2.6.81 5.71 5.71 0 0 1-2.94-.68v-1.71c.84.63 1.81.94 2.92.94.58 0 1.05-.14 1.39-.4.34-.28.5-.65.5-1.13 0-.29-.1-.55-.3-.8a2.2 2.2 0 0 0-.65-.53 23.03 23.03 0 0 0-1.64-.78 13.67 13.67 0 0 1-1.11-.64c-.12-.1-.28-.22-.46-.4a1.72 1.72 0 0 1-.39-.5 4.46 4.46 0 0 1-.22-.6c-.07-.23-.1-.48-.1-.75 0-.91.33-1.63 1-2.17a4 4 0 0 1 2.57-.8c.97 0 1.8.18 2.47.52zm7.47 5.7v-.3a2.26 2.26 0 0 0-.5-1.44c-.3-.35-.74-.53-1.32-.53-.53 0-.99.2-1.37.58-.38.39-.62.95-.72 1.68h3.91zm1 2.79v1.4c-.6.34-1.38.51-2.36.51a4.02 4.02 0 0 1-3-1.13 4.04 4.04 0 0 1-1.11-2.97c0-1.3.34-2.32 1.02-3.06a3.38 3.38 0 0 1 2.6-1.1c1.03 0 1.85.32 2.46.96.6.64.9 1.57.9 2.78 0 .33-.03.68-.09 1.04h-5.31c.1.7.4 1.24.89 1.61.49.38 1.1.56 1.85.56.86 0 1.58-.2 2.15-.6zm6.61-1.78h-1.21c-.6 0-1.05.12-1.35.36-.3.23-.46.53-.46.89 0 .37.12.66.36.88.23.2.57.32 1.02.32.5 0 .9-.15 1.2-.43.3-.28.44-.65.44-1.1v-.92zm-4.07-2.55V9.33a4.96 4.96 0 0 1 2.5-.55c2.1 0 3.17 1.03 3.17 3.08V17H22.1v-.96c-.42.68-1.15 1.02-2.19 1.02-.76 0-1.38-.22-1.84-.66-.46-.44-.7-1-.7-1.68 0-.78.3-1.38.88-1.81.59-.43 1.4-.65 2.46-.65h1.34v-.46c0-.55-.13-.97-.4-1.25-.26-.29-.7-.43-1.32-.43-.86 0-1.65.24-2.35.72zm9.34-1.93v1.42c.39-1 1.1-1.5 2.12-1.5.15 0 .31.02.5.05v1.53c-.23-.1-.48-.14-.76-.14-.54 0-.99.24-1.34.71a2.8 2.8 0 0 0-.52 1.71V17h-1.57V8.91h1.57zm5 4.09a3 3 0 0 0 .76 2.01c.47.53 1.14.8 2 .8.64 0 1.24-.18 1.8-.53v1.4c-.53.32-1.2.48-2 .48a3.98 3.98 0 0 1-4.17-4.18c0-1.16.38-2.15 1.14-2.98a4 4 0 0 1 3.1-1.23c.7 0 1.34.15 1.92.44v1.44a3.24 3.24 0 0 0-1.77-.5A2.65 2.65 0 0 0 32.33 13zm7.92-7.28v4.58c.46-1 1.3-1.5 2.5-1.5.8 0 1.42.24 1.9.73.48.5.72 1.17.72 2.05V17H43.8v-5.1c0-.56-.14-.99-.43-1.29-.28-.3-.65-.45-1.1-.45-.54 0-1 .2-1.42.6-.4.4-.61 1.02-.61 1.85V17h-1.56V5.72h1.56zM55.2 15.74c.6 0 1.1-.25 1.5-.76.4-.5.6-1.16.6-1.95 0-.92-.2-1.62-.6-2.12-.4-.5-.92-.74-1.55-.74-.56 0-1.05.22-1.5.67-.44.45-.66 1.13-.66 2.06 0 .96.22 1.67.64 2.14.43.47.95.7 1.57.7zM53 5.72v4.42a2.74 2.74 0 0 1 2.43-1.34c1.03 0 1.86.38 2.51 1.15.65.76.97 1.78.97 3.05 0 1.13-.3 2.1-.92 2.9-.62.81-1.47 1.21-2.54 1.21s-1.9-.45-2.46-1.34V17h-1.58V5.72H53zm9.9 11.1l-3.22-7.9h1.74l1 2.62 1.26 3.42c.1-.32.48-1.46 1.15-3.42l.91-2.63h1.66l-2.92 7.87c-.78 2.07-1.96 3.1-3.56 3.1-.28 0-.53-.02-.73-.07v-1.34c.17.04.35.06.54.06 1.03 0 1.76-.57 2.17-1.7z"
                ></path>
                <path
                  fill="#5468FF"
                  d="M78.99.94h16.6a2.97 2.97 0 0 1 2.96 2.96v16.6a2.97 2.97 0 0 1-2.97 2.96h-16.6a2.97 2.97 0 0 1-2.96-2.96V3.9A2.96 2.96 0 0 1 79 .94"
                ></path>
                <path
                  fill="#FFF"
                  d="M89.63 5.97v-.78a.98.98 0 0 0-.98-.97h-2.28a.98.98 0 0 0-.97.97V6c0 .09.08.15.17.13a7.13 7.13 0 0 1 3.9-.02c.08.02.16-.04.16-.13m-6.25 1L83 6.6a.98.98 0 0 0-1.38 0l-.46.46a.97.97 0 0 0 0 1.38l.38.39c.06.06.15.04.2-.02a7.49 7.49 0 0 1 1.63-1.62c.07-.04.08-.14.02-.2m4.16 2.45v3.34c0 .1.1.17.2.12l2.97-1.54c.06-.03.08-.12.05-.18a3.7 3.7 0 0 0-3.08-1.87c-.07 0-.14.06-.14.13m0 8.05a4.49 4.49 0 1 1 0-8.98 4.49 4.49 0 0 1 0 8.98m0-10.85a6.37 6.37 0 1 0 0 12.74 6.37 6.37 0 0 0 0-12.74"
                ></path>
                <path
                  fill="#5468FF"
                  d="M120.92 18.8c-4.38.02-4.38-3.54-4.38-4.1V1.36l2.67-.42v13.25c0 .32 0 2.36 1.71 2.37v2.24zm-10.84-2.18c.82 0 1.43-.04 1.85-.12v-2.72a5.48 5.48 0 0 0-1.57-.2c-.3 0-.6.02-.9.07-.3.04-.57.12-.81.24-.24.11-.44.28-.58.49a.93.93 0 0 0-.22.65c0 .63.22 1 .61 1.23.4.24.94.36 1.62.36zm-.23-9.7c.88 0 1.62.11 2.23.33.6.22 1.09.53 1.44.92.36.4.61.92.76 1.48.16.56.23 1.17.23 1.85v6.87c-.4.1-1.03.2-1.86.32-.84.12-1.78.18-2.82.18-.69 0-1.32-.07-1.9-.2a4 4 0 0 1-1.46-.63c-.4-.3-.72-.67-.96-1.13a4.3 4.3 0 0 1-.34-1.8c0-.66.13-1.08.39-1.53.26-.45.6-.82 1.04-1.1.45-.3.95-.5 1.54-.62a8.8 8.8 0 0 1 3.79.05v-.44c0-.3-.04-.6-.11-.87a1.78 1.78 0 0 0-1.1-1.22c-.31-.12-.7-.2-1.15-.2a9.75 9.75 0 0 0-2.95.46l-.33-2.19c.34-.12.84-.23 1.48-.35.65-.12 1.34-.18 2.08-.18zm52.84 9.63c.82 0 1.43-.05 1.85-.13V13.7a5.42 5.42 0 0 0-1.57-.2c-.3 0-.6.02-.9.07-.3.04-.57.12-.81.24-.24.12-.44.28-.58.5a.93.93 0 0 0-.22.65c0 .63.22.99.61 1.23.4.24.94.36 1.62.36zm-.23-9.7c.88 0 1.63.11 2.23.33.6.22 1.1.53 1.45.92.35.39.6.92.76 1.48.15.56.23 1.18.23 1.85v6.88c-.41.08-1.03.19-1.87.31-.83.12-1.77.18-2.81.18-.7 0-1.33-.06-1.9-.2a4 4 0 0 1-1.47-.63c-.4-.3-.72-.67-.95-1.13a4.3 4.3 0 0 1-.34-1.8c0-.66.13-1.08.38-1.53.26-.45.61-.82 1.05-1.1.44-.3.95-.5 1.53-.62a8.8 8.8 0 0 1 3.8.05v-.43c0-.31-.04-.6-.12-.88-.07-.28-.2-.52-.38-.73a1.78 1.78 0 0 0-.73-.5c-.3-.1-.68-.2-1.14-.2a9.85 9.85 0 0 0-2.95.47l-.32-2.19a11.63 11.63 0 0 1 3.55-.53zm-8.03-1.27a1.62 1.62 0 0 0 0-3.24 1.62 1.62 0 1 0 0 3.24zm1.35 13.22h-2.7V7.27l2.7-.42V18.8zm-4.72 0c-4.38.02-4.38-3.54-4.38-4.1l-.01-13.34 2.67-.42v13.25c0 .32 0 2.36 1.72 2.37v2.24zm-8.7-5.9a4.7 4.7 0 0 0-.74-2.79 2.4 2.4 0 0 0-2.07-1 2.4 2.4 0 0 0-2.06 1 4.7 4.7 0 0 0-.74 2.8c0 1.16.25 1.94.74 2.62a2.4 2.4 0 0 0 2.07 1.02c.88 0 1.57-.34 2.07-1.02.49-.68.73-1.46.73-2.63zm2.74 0a6.46 6.46 0 0 1-1.52 4.23c-.49.53-1.07.94-1.76 1.22-.68.29-1.73.45-2.26.45-.53 0-1.58-.15-2.25-.45a5.1 5.1 0 0 1-2.88-3.13 7.3 7.3 0 0 1-.01-4.84 5.13 5.13 0 0 1 2.9-3.1 5.67 5.67 0 0 1 2.22-.42c.81 0 1.56.14 2.24.42.69.29 1.28.69 1.75 1.22.49.52.87 1.15 1.14 1.89a7 7 0 0 1 .43 2.5zm-20.14 0c0 1.11.25 2.36.74 2.88.5.52 1.13.78 1.91.78a4.07 4.07 0 0 0 2.12-.6V9.33c-.19-.04-.99-.2-1.76-.23a2.67 2.67 0 0 0-2.23 1 4.73 4.73 0 0 0-.78 2.8zm7.44 5.27c0 1.82-.46 3.16-1.4 4-.94.85-2.37 1.27-4.3 1.27-.7 0-2.17-.13-3.34-.4l.43-2.11c.98.2 2.27.26 2.95.26 1.08 0 1.84-.22 2.3-.66.46-.43.68-1.08.68-1.94v-.44a5.2 5.2 0 0 1-2.54.6 5.6 5.6 0 0 1-2.01-.36 4.2 4.2 0 0 1-2.58-2.71 9.88 9.88 0 0 1 .02-5.35 4.92 4.92 0 0 1 2.93-2.96 6.6 6.6 0 0 1 2.43-.46 19.64 19.64 0 0 1 4.43.66v10.6z"
                ></path>
              </svg>
            </a>
            <div
              class="post-list"
              id="search-hits"
              style="margin-left: 20px;"
            ></div>
            <hr />
          </div>
          <article class="post blog">
            <h2>Goodbye P-values, Hello Bayesian Statistics!<em></em></h2>

            <p class="publishdate">Sunday, 17 May 2015.</p>

            <p><strong><em>Note: This is a repost of my original blog post at
   <a href="http://www.othot.com/goodbye-p-values-hello-bayesian-statistics/">OThot</a>, where I also work as Senior Data Scientist.</em></strong></p>

<p>In statistics there is the old and ongoing debate of Frequentism versus Bayesianism, which has been humorously depicted in the following popular XKCD cartoon [<a href="http://www.xkcd.com/1132/">1</a>]:</p>

<p><img src="https://imgs.xkcd.com/comics/frequentists_vs_bayesians.png" alt="Frequentism vs Bayesianism" width="468" heigth="709" style="margin-left:100px" /></p>

<p>In this cartoon we see the Frequentist statistician believing that the odds (p-value) of the
neutrino detector lying are below the (arbitrary) significance level of 0.05, saying that it is
unlikely that machine is lying, therefore concluding that the Sun must have exploded. The
Bayesianist on the other hand also takes his prior knowledge about the Sun into account and
determines that given the billions of years track record of the Sun not exploding vastly outweighs
the likelihood of the neutrino detector lying.</p>

<p>The use of explicit priors with Bayesianism versus implicit priors with Frequentism (yes there are
priors, but they are fixed), is one difference most statisticians know about. However there are
actually more subtle differences that carry big consequences that can sometimes lead to
contradictive conclusions between the two approaches.</p>

<p>The popular blogging site <strong>“Pythonic Perambulations”</strong> has a great series of technical posts that give
a practical introduction to Frequentism and Bayesianism [<a href="http://jakevdp.github.io/blog/2014/03/11/frequentism-and-bayesianism-a-practical-intro/">2</a>], which are highly recommended. In this
series Jake Vanderplas explains with great clarity the differences, which are summarized as follows:</p>

<ul>
  <li>Frequentists and Bayesians disagree about the definition of probability</li>
  <li>Frequentism considers probabilities to be objective and related to frequencies of real or hypothetical events</li>
  <li>Bayesianism considers probabilities to be subjective and measures degrees of knowledge or belief</li>
</ul>

<p>As a result he explains: <em>“[..] frequentists consider model parameters to be fixed and data to be
random, while Bayesians consider model parameters to be random and data to be fixed.”</em> [<a href="http://jakevdp.github.io/blog/2014/06/12/frequentism-and-bayesianism-3-confidence-credibility/">3</a>]</p>

<p>This actually has far stretching consequences for the use of Frequentism in Science, where you most
often have one dataset (i.e., fixed data) for which you want to make inferences, and you are not
interested in inferences for hypothetical other datasets. Using Frequentism in science answers the
wrong question, because you want answers for your specific dataset. Therefore the use of p-values
and confidence intervals in this context are useless.</p>

<p>But you might ask, why then is the use of p-values the de facto standard in scientific research, if
it is fundamentally wrong? Good question. The problem is that confidence intervals are easy to
compute and often give similar results to the Bayesian approach. This doesn’t change the fact that
the approach is flat out invalid, and doesn’t support the conclusions made.</p>

<p>Recently the science community started acknowledging this fact and we are now starting to see
journals, e.g., <strong>“Basic and Applied Social Psychology”</strong> [<a href="http://www.tandfonline.com/doi/abs/10.1080/01973533.2015.1012991">4</a>], where research using p-values is being
rejected. This has not gone unnoticed as both Nature, the international weekly journal of Science,
as well as Scientific American, wrote about it in depth and both proposed Bayesian statistics as a
good alternative. [<a href="http://www.nature.com/news/statistics-p-values-are-just-the-tip-of-the-iceberg-1.17412">5</a>][<a href="http://www.scientificamerican.com/article/scientists-perturbed-by-loss-of-stat-tools-to-sift-research-fudge-from-fact">6</a>]</p>

<p>The Scientific American article adds the following about p-values, and confirms the aforementioned
hypothetical other datasets problem with Frequentism:</p>

<blockquote>
  <p><em>“Unfortunately, p-values are also widely misunderstood, often believed to furnish more
information than they do. Many researchers have labored under the misbelief that the p-value gives
the probability that their study’s results are just pure random chance. But statisticians say the
p-value’s information is much more non-specific, and can interpreted only in the context of
hypothetical alternative scenarios: The p-value summarizes how often results at least as extreme as
those observed would show up if the study were repeated an infinite number of times when in fact
only pure random chance were at work. This means that the p-value is a statement about imaginary
data in hypothetical study replications, not a statement about actual conclusions in any given
study”</em>
[<a href="http://www.scientificamerican.com/article/scientists-perturbed-by-loss-of-stat-tools-to-sift-research-fudge-from-fact">6</a>]</p>
</blockquote>

<p>Needless to say, but at <a href="http://www.othot.com">OThot</a> we are big proponents of the Bayesian approach for statistical inferences. In a previous blog post by Mark Voortman [<a href="http://www.othot.com/what-do-searching-for-a-plane-and-a-doctors-diagnosis-have-in-common">7</a>], we already started talking and explaining the Bayesian approach and you can safely bet to expect more of that.</p>

<h4 id="sources">Sources</h4>

<p>[1] XKCD: Frequentists vs. Bayesians <a href="http://www.xkcd.com/1132/">http://www.xkcd.com/1132/</a></p>

<p>[2] Frequentism and Bayesianism: A Practical Introduction
<a href="http://jakevdp.github.io/blog/2014/03/11/frequentism-and-bayesianism-a-practical-intro/">http://jakevdp.github.io/blog/2014/03/11/frequentism-and-bayesianism-a-practical-intro/</a></p>

<p>[3] Frequentism and Bayesianism III: Confidence, Credibility, and why Frequentism and Science do not Mix
<a href="http://jakevdp.github.io/blog/2014/06/12/frequentism-and-bayesianism-3-confidence-credibility/">http://jakevdp.github.io/blog/2014/06/12/frequentism-and-bayesianism-3-confidence-credibility/</a></p>

<p>[4] Journal of Basic and Applied Social Psychology <a href="http://www.tandfonline.com/doi/abs/10.1080/01973533.2015.1012991">http://www.tandfonline.com/doi/abs/10.1080/01973533.2015.1012991</a></p>

<p>[5] Statistics: P values are just the tip of the iceberg <a href="http://www.nature.com/news/statistics-p-values-are-just-the-tip-of-the-iceberg-1.17412">http://www.nature.com/news/statistics-p-values-are-just-the-tip-of-the-iceberg-1.17412</a></p>

<p>[6] Scientists Perturbed by Loss of Stat Tools to Sift Research Fudge from Fact <a href="http://www.scientificamerican.com/article/scientists-perturbed-by-loss-of-stat-tools-to-sift-research-fudge-from-fact">http://www.scientificamerican.com/article/scientists-perturbed-by-loss-of-stat-tools-to-sift-research-fudge-from-fact</a></p>

<p>[7] What Do Searching For a Plane and a Doctor’s Diagnosis Have in Common? <a href="http://www.othot.com/what-do-searching-for-a-plane-and-a-doctors-diagnosis-have-in-common">http://www.othot.com/what-do-searching-for-a-plane-and-a-doctors-diagnosis-have-in-common</a></p>



            <div
              style="display: block; vertical-align: baseline; height: 2px;"
            ></div>
            <div class="clear_both tags">
              <span>
                tags: 
                <a href="../../../archive#OThot">OThot</a>,  
                <a href="../../../archive#statistics">statistics</a>,  
                <a href="../../../archive#bayesianism">bayesianism</a> 
              </span>
            </div>
            <div class="sharethis-inline-share-buttons"></div>
          </article>

          <div id="disqus_thread"></div>

          <h3>Possibly related posts</h3>

          <ul class="">
            

            <li>
              11 Feb 2015 &raquo;

              <a href="/2015/02/11/coursera-courses">My recent Coursera journey</a>

              <em>
                <a
                  href="https://www.google.com/search?q=+site%3Abeatletech.com"
                  ></a
                >
              </em>
            </li>
            

            <li>
              10 Sep 2015 &raquo;

              <a href="/2015/09/10/o-data-scientist-where-art-thou">O Data Scientist, Where Art Thou?</a>

              <em>
                <a
                  href="https://www.google.com/search?q=+site%3Abeatletech.com"
                  ></a
                >
              </em>
            </li>
            

            <li>
              03 Feb 2015 &raquo;

              <a href="/2015/02/03/my-system-to-win-big">My System to Win Big</a>

              <em>
                <a
                  href="https://www.google.com/search?q=+site%3Abeatletech.com"
                  ></a
                >
              </em>
            </li>
            
          </ul>
        </div>
        <!-- end main -->
      </div>
      <!-- end content -->

      <footer id="footer" class="grid_12">
  <p>
    Copyright &copy; 2010-2020
    <a
      href="https://beatletech.com"
      title="BeatleTech by Coen
    Stevens"
      >BeatleTech - Coen Stevens</a
    >
    - Built with <a href="https://jekyllrb.com/">Jekyll</a> (<a
      href="https://github.com/beatlevic/beatletech"
      >source</a
    >)
  </p>
</footer>

<div class="clear"></div>
 <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.20.1/moment.min.js"></script>
<link
  rel="stylesheet"
  type="text/css"
  href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.css"
/>
<link
  rel="stylesheet"
  type="text/css"
  href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch-theme-algolia.min.css"
/>

<script>
  const search = instantsearch({
    appId: "K4MUG7LHCA",
    apiKey: "2b61f303d605176b556cb377d5ef3acd",
    indexName: "prod_beatletech",
    searchFunction: function (helper) {
      var searchResults = document.getElementById("search-hits-wrapper");
      if (helper.state.query === "") {
        searchResults.style.display = "none";
        return;
      }
      helper.search();
      searchResults.style.display = "block";
    },
  });

  const hitTemplate = function (hit) {
    let date = "";
    if (hit.date) {
      date = moment.unix(hit.date).format("MMM D, YYYY");
    }

    let url = `${hit.url}#${hit.anchor}`;

    const title = hit._highlightResult.title.value;

    let breadcrumbs = "";
    if (hit._highlightResult.headings) {
      breadcrumbs = hit._highlightResult.headings
        .map((match) => {
          return `<span class="post-breadcrumb">${match.value}</span>`;
        })
        .join(" > ");
    }

    const content = hit._highlightResult.html.value;

    return `
    <div class="post-item">
      <h2><a class="post-link" href="${url}">${title}</a></h2>
      <div class="publishdate" style="margin-left:0px; margin-bottom:10px">${date}</div>
      <!-- {#breadcrumbs}}<a href="${url}" class="post-breadcrumbs">${breadcrumbs}</a> -->
      <div class="post-snippet" style="margin-left: 20px">${content}</div>
    </div>
  `;
  };

  let timerId;

  search.addWidget(
    instantsearch.widgets.searchBox({
      container: "#search-searchbar",
      placeholder: "Search into posts...",
      poweredBy: false,
      showLoadingIndicator: true,
      queryHook(query, refine) {
        clearTimeout(timerId);
        timerId = setTimeout(() => refine(query), 500);
      },
    })
  );

  search.addWidget(
    instantsearch.widgets.hits({
      container: "#search-hits",
      templates: {
        item: hitTemplate,
      },
    })
  );

  search.start();
</script>

<style>
  .ais-search-box {
    max-width: 100%;
    margin-bottom: 15px;
  }
  .post-item {
    margin-bottom: 30px;
  }
  .post-link .ais-Highlight {
    color: #111;
    font-style: normal;
    text-decoration: underline;
  }
  .post-breadcrumbs {
    color: #424242;
    display: block;
  }
  .post-breadcrumb {
    font-size: 18px;
    color: #424242;
  }
  .post-breadcrumb .ais-Highlight {
    font-weight: bold;
    font-style: normal;
    text-decoration: underline;
  }
  .post-snippet .ais-Highlight {
    color: #2a7ae2;
    font-style: normal;
    font-weight: bold;
    text-decoration: underline;
  }
  .post-snippet img {
    display: none;
  }
</style>


      <div class="clear"></div>

      <!-- <script type="text/javascript" src="../../../../js/sweet-justice.min.js"></script> -->
      <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = "beatletech"; // required: replace example with your forum shortname
        //var disqus_developer = 1;

        // The following are highly recommended additional parameters. Remove the slashes in front to use.
        // var disqus_identifier = 'unique_dynamic_id_1234';
        // var disqus_url = 'http://example.com/permalink-to-page.html';

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
          var dsq = document.createElement("script");
          dsq.type = "text/javascript";
          dsq.async = true;
          dsq.src = "https://" + disqus_shortname + ".disqus.com/embed.js";
          (
            document.getElementsByTagName("head")[0] ||
            document.getElementsByTagName("body")[0]
          ).appendChild(dsq);
        })();
      </script>
    </div>
    <!-- end wrapper -->

    <script src="//platform-api.sharethis.com/js/sharethis.js#property=5b6357f2f3742d0012c8870b&product=inline-share-buttons"></script>

    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(["_setAccount", "UA-20231246-1"]);
      _gaq.push(["_trackPageview"]);

      (function () {
        var ga = document.createElement("script");
        ga.type = "text/javascript";
        ga.async = true;
        ga.src =
          ("https:" == document.location.protocol
            ? "https://ssl"
            : "http://www") + ".google-analytics.com/ga.js";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </body>
</html>
